---
title: "Systematic Review of Flash Flood Risk"
author: "Miriam Nielsen"
date: "`r Sys.Date()`"
output:
  prettydoc::html_pretty:
    theme: hpstr
    highlight: github
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

<!--
Project Start Date 8/09/19
-->

```{r knitr_init, echo=FALSE, cache=FALSE}
library(knitr)
library(rmdformats)

## Global options
options(max.print="75")
opts_chunk$set(echo=FALSE,
               cache=TRUE,
               prompt=FALSE,
               tidy=TRUE,
               comment=NA,
               message=FALSE,
               warning=FALSE)
opts_knit$set(width=75)
```

This is a testing/playground on the path toward a systematic review of flash flood risk. The goal of this analysis is to characterize the existing research on global flash flood vulnerability, risk, and exposure. 


We're using "bibliometrix" to convert the .bib files from Web of Science into a dataframe. For a full write up, see [here](https://cran.rstudio.com/web/packages/bibliometrix/vignettes/bibliometrix-vignette.html). 

```{r, include = FALSE}
# Installing necessary packages
install.packages("bibliometrix", dependencies=TRUE, repos = "http://cran.us.r-project.org") 

```

'convert2df' creates a dataframe from the imported .bib files. 

```{r, echo=TRUE}
library(bibliometrix)

data_bib <- readFiles("Web_Of_Science_Downloads/savedrecs_1-500.bib","Web_Of_Science_Downloads/savedrecs_501-1000.bib","Web_Of_Science_Downloads/savedrecs_1001-1500.bib","Web_Of_Science_Downloads/savedrecs_1501_2000.bib","Web_Of_Science_Downloads/savedrecs_2001-2500.bib","Web_Of_Science_Downloads/savedrecs_2501-3000.bib","Web_Of_Science_Downloads/savedrecs_3001-3190.bib")

#dbsource = "isi" indicates from which database the collection has been downloaded (in this case Web of Science)
datadf_bib <- convert2df(data_bib, dbsource = "isi", format = "bibtex")  

```

Trialling the litsearchr package, for documentation see [here](https://elizagrames.github.io/litsearchr/#/about) 
```{r}

#naiveimport <- litsearchr::import_results(directory = "/test_files", filename = NULL, save_dataset = FALSE)
#naiveimport <- litsearchr::import_results(directory = "/test_files", filename = "savedrecs.txt", save_dataset = FALSE)

naiveimport <- litsearchr::import_results("test_files/savedrecs.txt")

#dedupe_stage1 <- litsearchr::remove_duplicates(datadf_bib, field = "TI", method = "quick")
#dedupe_stage2 <- litsearchr::remove_duplicates(dedupe_stage1, field="AB", method="similarity")

#naiveresults <- dedupe_stage1
#naiveresults <- dedupe_stage2

#rakedkeywords <- litsearchr::extract_terms(text = naiveresults$text, method = "fakerake", min_freq = 2, ngrams = TRUE, n = 2, language = "English")


#taggedkeywords <- litsearchr::extract_terms(keywords = naiveresults$keywords, method="tagged")

```

